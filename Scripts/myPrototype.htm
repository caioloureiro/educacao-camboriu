var ChuckNorris={debugMode:false,debug:{on:function(){ChuckNorris.debugMode=true;ChuckNorris.debug.add('=== Iniciando teste ===');Element.show($('debug'))},off:function(){ChuckNorris.debugMode=false;Element.hide($('debug'))},clear:function(){$('debug').innerHTML=''},add:function(input){if(ChuckNorris.debugMode){$('debug').innerHTML+='<br /> > '+input}}},isEmpty:function(field){return(field.value!=''&&!field.value.match('_'))||false},isValidDate:function(field){var parts=field.value.split('\/');var dia=parseFloat(parts[0]);var mes=parseFloat(parts[1]);var ano=parseFloat(parts[2]);var diasTot=new Array(31,28,31,30,31,30,31,31,30,31,30,31);if(mes==2&&(ano%400==0||(ano%4==0&&ano%100!=0))){diasTot[mes-1]++}return(!((ano<1582||ano>4881)||(mes<1||mes>12)||(dia<1||dia>diasTot[mes-1])))||false},getIdade:function(field,dataAtual){var data=field;var arrData=data.value.split("/");var dtNascimento=new Date(arrData[2],arrData[1],arrData[0]);var idade=dataAtual.getFullYear()-dtNascimento.getFullYear();if(dataAtual.getMonth()<dtNascimento.getMonth()){idade--}else if(dataAtual.getMonth()==dtNascimento.getMonth()&&dataAtual.getDate()<dtNascimento.getDate()){idade--}return idade}};var _CN=ChuckNorris;var _BUG=_CN.debug.add;String.prototype.bugMe=function(liga){if(liga){_CN.debug.on()}_BUG(this)};var Hint={reload:function(id){var reference=$("Hint_"+id).firstChild;var target=$("Hint_IFrame_"+id).contentWindow.document.body.firstChild;reference.style.fontSize="11px";target.innerHTML=reference.innerHTML;Element.show(reference.parentNode);ocultaPai=false;if(reference.parentNode.parentNode.parentNode.style.display=='none'){Element.show(reference.parentNode.parentNode.parentNode);ocultaPai=true}$("Hint_IFrame_"+id).style.width=(reference.parentNode.getDimensions().width+8)+"px";reference.innerHTML="";reference.style.fontSize="0px";reference.parentNode.style.height="27px";Element.hide(reference.parentNode);if(ocultaPai){Element.hide(reference.parentNode.parentNode.parentNode)}}};Carregando={cont:0,top:function(){if(document.all){if(!document.documentElement.scrollTop)scrollY=document.body.scrollTop;else scrollY=document.documentElement.scrollTop}else{scrollY=window.pageYOffset}$('MsgBox').style.top=scrollY+"px"},resize:function(){var position=Position.positionedOffset($('ContentHolder'));var dimensions=$('ContentHolder').getDimensions();Carregando.top();dimensions.height=(dimensions.height?dimensions.height:30);$('LoadingOverlay').style.left=position[0]+'px';$('LoadingOverlay').style.top=position[1]+'px';$('LoadingOverlay').style.width=dimensions.width+'px';$('LoadingOverlay').style.height=dimensions.height+'px'},make:function(){Carregando.cont++;$('LoadingOverlay').show();this.resize()},remove:function(){Carregando.cont--;if(Carregando.cont==0){Element.hide($('LoadingOverlay'))}}};Event.observe(window,"scroll",Carregando.top);Ajax.Request.prototype.onStateChange=function(){var readyState=this.transport.readyState;if(readyState>1&&!((readyState==4)&&this._complete))this.respondToReadyState(this.transport.readyState);if(readyState==4){if(this.success()){if(this.onComplete)this.onComplete.bind(this).defer()}Carregando.remove()}else{if(readyState==1)Carregando.make()}};Formulario.prototype.erTelefone=new RegExp(/^\d{4}\-\d{4}$/);Formulario.prototype.Erro={add:function(field,error){formulario.addErro(field,error,'Error')},remove:function(field,error){formulario.removeSingleErro(field,error,'Error')},clearAll:function(){var form=$('formulario');var elements=form.getElements();elements.each(function(s,i){formulario.removeErro(s,'Error')})}};Formulario.prototype.ErroNI={add:function(field,error){formulario.addErro(field,error,'ErrorNI')},remove:function(field,error){formulario.removeSingleErro(field,error,'ErrorNI')},clearAll:function(){var form=$('formulario');var elements=form.getElements();elements.each(function(s,i){formulario.removeErro(s,'ErrorNI')})}};Formulario.prototype.Aviso={add:function(field,error){formulario.addErro(field,error,'Aviso')},remove:function(field,error){formulario.removeSingleErro(field,error,'Aviso')},clearAll:function(){var form=$('formulario');var elements=form.getElements();elements.each(function(s,i){formulario.removeErro(s,'Aviso')})}};Formulario.prototype.Info={add:function(field,error){formulario.addErro(field,error,'Info')},remove:function(field,error){formulario.removeSingleErro(field,error,'Info')},clearAll:function(){var form=$('formulario');var elements=form.getElements();elements.each(function(s,i){formulario.removeErro(s,'Info')})}};Formulario.prototype.validaErrosAvisos=function(e){new validateHandler(e);var qtdErro=formulario.getErrorCount('Error');var qtdErroNI=formulario.getErrorCount('ErrorNI');var qtdAviso=formulario.getErrorCount('Aviso');qtdErro=typeof(qtdErro)=='undefined'?0:qtdErro;qtdErroNI=typeof(qtdErroNI)=='undefined'?0:qtdErroNI;qtdAviso=typeof(qtdAviso)=='undefined'?0:qtdAviso;if(qtdErro>0){if(e!=undefined){Event.stop(e)}return false}var qtdTotal=qtdErroNI+qtdAviso;var msg;formulario.ErroNI.error=new Array();formulario.Aviso.error=new Array();if(!qtdErro&&qtdTotal&&qtdTotal!=0){if(formulario.validaErrosAvisos.msg){msg=formulario.validaErrosAvisos.msg}else{msg=(qtdTotal==1)?'Existe ':'Existem ';msg+=(qtdErroNI)?qtdErroNI+' erro':'';msg+=(qtdErroNI)?(qtdErroNI>1?'s ':' '):'';msg+=(qtdErroNI&&qtdAviso)?'e ':'';msg+=(qtdAviso)?qtdAviso+' aviso':'';msg+=(qtdAviso)?(qtdAviso>1?'s ':' '):'';msg+='. Deseja continuar?'}if(!confirm(msg)){if(e!=undefined){Event.stop(e)}return false}}return true};Event.observe(window,'load',function(){if(Prototype.Browser.IE&&$('formulario')&&typeof(formulario)!=='undefined'){Event.observe($('formulario'),'submit',formulario.validaErrosAvisos)}});var Handler={erroCriterio:Prototype.emptyFunction,erroMensagem:String(''),erroObject:Object(),field:Object(),messageTargets:Array(),start:function(erroCampo,erroCriterio,erroMensagem){this.erroCriterio=erroCriterio;this.erroMensagem=erroMensagem;this.messageTargets=new Array();this.field=erroCampo;this.addMessageTarget(erroCampo);this.observers(erroCampo)},validate:function(e,self){var erro=self.erroCriterio();if(erro==-1){return}else if(erro){self.messageTargets.each(function(s,i){self.erroObject.add(s,self.erroMensagem)})}else{self.messageTargets.each(function(s,i){self.erroObject.remove(s,self.erroMensagem)})}},removeMessage:function(erroMensagem){var self=this;this.messageTargets.each(function(s,i){self.erroObject.remove(s,self.erroMensagem)})},validateSubmit:function(e){if(formulario.getErrorCount('Error')>0){Event.stop(e);return}},addObserver:function(element,event){element=$(element);if(!event){this.observers(element);return}var self=this;Event.observe(element,event,function(e){self.validate(e,self)})},addMessageTarget:function(element){element=$(element);this.messageTargets.push(element)},observers:function(erroCampo){this.addObserver($('formulario'),'submit');this.addObserver(erroCampo,'change');this.addObserver(erroCampo,'blur');this.addObserver(erroCampo,'keyup')}};var objHandlers=Array();var validateHandler=function(e){objHandlers.each(function(s,i){s.validate(e,s)})};Handler.Erro=Class.create(Handler,{initialize:function(erroCampo,erroCriterio,erroMensagem){this.erroObject=formulario.Erro;this.start(erroCampo,erroCriterio,erroMensagem);objHandlers.push(this)}});Handler.ErroNI=Class.create(Handler,{initialize:function(erroCampo,erroCriterio,erroMensagem){this.erroObject=formulario.ErroNI;this.start(erroCampo,erroCriterio,erroMensagem);objHandlers.push(this)}});Handler.Aviso=Class.create(Handler,{initialize:function(erroCampo,erroCriterio,erroMensagem){this.erroObject=formulario.Aviso;var obj=this.start(erroCampo,erroCriterio,erroMensagem);objHandlers.push(this)}});Handler.Info=Class.create(Handler,{initialize:function(erroCampo,erroCriterio,erroMensagem){this.erroObject=formulario.Info;var obj=this.start(erroCampo,erroCriterio,erroMensagem);objHandlers.push(this)}});var Menu={open:function(self){var next=Menu.getChildHolder(self);Element.show(next);self.style.backgroundPosition='4px -25px';var parent=self.parentNode.parentNode.parentNode.firstChild;if(parent&&parent.hasClassName&&parent.hasClassName('Pai')){Menu.open(parent)}},close:function(self){var next=Menu.getChildHolder(self);Element.hide(next);self.style.backgroundPosition='4px 4px'},toggle:function(self){var next=Menu.getChildHolder(self);if(next.style['display']==''){Menu.close(self)}else{Menu.open(self)}},getChildHolder:function(parent){var next=parent.nextSibling;var i=0;while(next.nodeName!='UL'){next=next.nextSibling;if(++i==10||!next){return false}}return next}};Educachars={todos:String('\u002D\u00AA\a-zA-Z0-9\/\@\.\,\_\ \u00BA'),email:String('a-zA-Z0-9\@\.\_\u002D'),alfa:String('a-zA-Z'),numerico:String('0-9'),especial1:String('\/\.\,\u002D'),especial2:String('\u002D\u00AA\u00BA'),especial3:String('\u002D\u00AA\u00BA\/\.\,'),especial4:String('\u002D\u00AA\u00BA\/\.\,\_'),toUpper:function(e){if(Formulario.prototype.Util.keyCodeIsEscaped(e.keyCode)){return false}this.value=this.value.toUpperCase()},filtraTodos:function(element){element.value=element.value.replace(new RegExp('[аюбц]','gi'),'A');element.value=element.value.replace(new RegExp('[ихй]','gi'),'E');element.value=element.value.replace(new RegExp('[млн]','gi'),'I');element.value=element.value.replace(new RegExp('[срту]','gi'),'O');element.value=element.value.replace(new RegExp('[зыш]','gi'),'U');element.value=element.value.replace(new RegExp('[г]','gi'),'C');element.value=element.value.replace(new RegExp('[^'+Educachars.todos+']','g'),'')},aceitaEstes:function(element,quais){Educachars.filtraTodos(element);var stringExp=new String();var hasAlfa=false;quais.each(function(s,i){stringExp+=s;hasAlfa=(hasAlfa)?hasAlfa:((s==Educachars.alfa)?true:false)});if(hasAlfa){stringExp+='\ '}element.value=element.value.replace(new RegExp('[^'+stringExp+']','g'),'');element.value=element.value.replace(/\s+/g,' ')}};Event.observe(window,'load',function(){$$('input[rel=textoNormal]').each(function(s,i){eval("var controller	= seamField_"+s.name+";");if(controller&&controller.mask==Prototype.emptyFunction){Event.observe(s,'keyup',Educachars.toUpper);Event.observe(s,'keyup',function(){Educachars.filtraTodos(this)});Event.observe(s,'blur',Educachars.toUpper);Event.observe(s,'blur',function(){Educachars.filtraTodos(this)})}})});var ValidacoesComuns={Util:{trim:function(input){return input.replace(/^\s+|\s+$/g,"")}},name:function(field,nomeDoCampo){var value=ValidacoesComuns.Util.trim(field.value);if(value.length>=1){if(value.length<4){return true}if(!value.match(new RegExp(/^\S{2,}\s\S{1,}/))){return true}var repeticoes=0;for(var i=0;i<value.length;i++){igual=(value.charAt(i)==value.charAt(i+1))?true:false;if(igual){repeticoes++}else{repeticoes=0}if(repeticoes>=4){return true;break}}}return false},nameEscola:function(field,nomeDoCampo){var value=ValidacoesComuns.Util.trim(field.value);if(value.length>=1){if(value.length<4){return true}}return false},nameCartorio:function(field,nomeDoCampo){return ValidacoesComuns.nameEscola(field,nomeDoCampo)}};Formulario.Mask.prototype={target:Object,regExp:RegExp,expression:String,placeHolder:'_',started:false,mask:new String(''),charMap:{'9':"[0-9]",'a':"[A-Za-z]",'*':"[A-Za-z0-9]"},setPlaceHolder:function(placeHolder){this.placeHolder=placeHolder},addPlaceholder:function(c,r){this.charMap[c]=r},caret:function(begin,end){var target=this.target;if(target.length==0){return}if(typeof begin=='number'){end=(typeof end=='number')?end:begin;if(target.setSelectionRange){target.focus();target.setSelectionRange(begin,end)}else if(target.createTextRange){var range=target.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select()}}else{if(target.setSelectionRange){begin=target.selectionStart;end=target.selectionEnd}else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length}return{begin:begin,end:end}}},initialize:function(target,expression,doit){doit=(!doit);this.target=$(target);this.expression=expression;if(doit){this.doit()}},doit:function(){if(this.started){return}var placeHolder=this.placeHolder;var target=this.target;var expression=this.expression;var self=this;var completed=null;var expString=new Array();var locked=new Array();var buffer=new Array();var firstNonMaskPos=null;var valid=null;var ignore=null;expression.split('').each(function(s,i){expString+=self.charMap[s]||((s.match(/[A-Za-z0-9]/)?"":String.fromCharCode(92))+s);self.mask+=(self.charMap[s])?'_':s});var regExp=new RegExp(expString);this.regExp=regExp;expression.split('').each(function(s,i){locked[i]=(self.charMap[s]==null);buffer[i]=locked[i]?s:self.placeHolder;if(!locked[i]&&firstNonMaskPos==null){firstNonMaskPos=i}});var focusEvent=function(){checkVal();writeBuffer();setTimeout(function(){self.caret(valid?expression.length:firstNonMaskPos)},2)};var keydownEvent=function(e){var pos=self.caret();var k=e.keyCode;ignore=(k<16||(k>16&&k<32)||(k>32&&k<41));if((pos.begin-pos.end)!=0&&(!ignore||k==8||k==46)){clearBuffer(pos.begin,pos.end)}if(k==8){while(pos.begin-->=0){if(!locked[pos.begin]){buffer[pos.begin]=placeHolder;writeBuffer();self.caret(Math.max(firstNonMaskPos,pos.begin));Event.stop(e);return false}}}else if(k==46){clearBuffer(pos.begin,pos.begin+1);writeBuffer();self.caret(Math.max(firstNonMaskPos,pos.begin));Event.stop(e);return false}else if(k==27){clearBuffer(0,expression.length);writeBuffer();$(this).caret(firstNonMaskPos);Event.stop(e);return false}};var keypressEvent=function(e){if(e.keyCode==13){Event.stop(e)}if(ignore){ignore=false;if(e.keyCode==8){Event.stop(e);return false}else{return null}}e=e||window.event;var k=e.charCode||e.keyCode||e.which;var pos=self.caret();if(k>=97&&k<=122){k=k-32}if(e.ctrlKey||e.altKey){return true}else if((k>=41&&k<=122)||k==32||k>186){var p=seekNext(pos.begin-1);if(p<expression.length){if(new RegExp(self.charMap[expression.charAt(p)]).test(String.fromCharCode(k))){buffer[p]=String.fromCharCode(k);writeBuffer();var next=seekNext(p);self.caret(next)}}}Event.stop(e);return false};var clearBuffer=function(start,end){for(var i=start;i<end&&i<expression.length;i++){if(!locked[i])buffer[i]=placeHolder}};var writeBuffer=function(){return target.value=buffer.join('')+''};var checkVal=function(){var test=target.value;var pos=0;for(var i=0;i<expression.length;i++){if(!locked[i]){buffer[i]=placeHolder;while(pos++<test.length){var reChar=new RegExp(self.charMap[expression.charAt(i)]);if(test.charAt(pos-1).match(reChar)){buffer[i]=test.charAt(pos-1);break}}}}var s=writeBuffer();if(!s.match(regExp)){var onlyPlaceHolder=true;for(var i=0;i<expression.length;i++){if(!locked[i]&&buffer[i]!=placeHolder){onlyPlaceHolder=false;break}}if(onlyPlaceHolder){target.value='';clearBuffer(0,expression.length)}valid=false}else valid=true};var seekNext=function(pos){while(++pos<expression.length){if(!locked[pos])return pos}return expression.length};target.maxLength=expression.length;target.size=expression.length;Event.observe(target,'focus',focusEvent);Event.observe(target,'blur',checkVal);Event.observe(target,'keydown',keydownEvent);Event.observe(target,'keypress',keypressEvent);if(target.value){checkVal();writeBuffer()}this.started=true}};